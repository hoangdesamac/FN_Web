/* PC Builder Cyberpunk Style */
:root {
    --gap: 18px;
    --panel-bg: rgba(15,18,45,.65);
    --panel-border: rgba(0,242,255,.35);
    --panel-border-hover: var(--primary, #00f2ff);
    --danger: #ff3b3b;
    --ok: #16d978;
    --warn: #ffcc00;
    --radius: 12px;
    --shadow: 0 0 0 1px rgba(0,242,255,.25),0 0 18px -4px rgba(0,242,255,.35);
}

body { font-family: 'Rajdhani', sans-serif; }
body.no-scroll { overflow:hidden; } /* Ngăn cuộn nền khi modal mở */

.pc-builder-wrapper { padding: 40px clamp(12px,3vw,40px); max-width: 1600px; margin: 0 auto; }
.pc-builder { display: grid; gap: var(--gap); grid-template-columns: 220px 1fr 300px; align-items: start; }

@media (max-width: 1400px){ .pc-builder { grid-template-columns: 200px 1fr 280px; } }
@media (max-width: 1100px){ .pc-builder { grid-template-columns: 220px 1fr; } .builder-summary { order: 3; grid-column: 1 / -1; } }
@media (max-width: 860px){ .pc-builder { grid-template-columns: 1fr; } .builder-categories { display: flex; overflow-x:auto; } .builder-categories ul { display:flex; flex-direction:row; gap:10px; } }

.builder-title { font-family: 'Orbitron', sans-serif; font-size: 1.1rem; letter-spacing:1px; margin:0 0 14px; background: linear-gradient(90deg,var(--primary),var(--secondary)); -webkit-background-clip: text; color: transparent; text-transform:uppercase; }

.builder-categories, .builder-config, .builder-summary { background: var(--panel-bg); border:1px solid var(--panel-border); border-radius: var(--radius); padding: 18px 18px 22px; backdrop-filter: blur(10px); position:relative; box-shadow: var(--shadow); }
.builder-categories:hover, .builder-config:hover, .builder-summary:hover { border-color: var(--panel-border-hover); }

.builder-categories ul { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:10px; }
.builder-categories li { cursor:pointer; padding:8px 10px; border:1px solid rgba(255,255,255,.08); border-radius:8px; font-size:.9rem; display:flex; justify-content:space-between; align-items:center; gap:6px; background:rgba(255,255,255,.03); transition:.25s; }
.builder-categories li:hover, .builder-categories li.active { background:rgba(0,242,255,.08); border-color: var(--primary); box-shadow:0 0 0 1px var(--primary),0 0 10px -2px var(--primary); }
.builder-categories li span.count { opacity:.65; font-size:.75rem; }

.persist-actions { margin-top:18px; display:flex; flex-direction:column; gap:10px; }

.neon-btn { background: linear-gradient(135deg,var(--primary),var(--secondary)); color:#fff; font-weight:600; border:none; padding:10px 14px; font-size:.8rem; letter-spacing:.5px; border-radius:8px; cursor:pointer; position:relative; overflow:hidden; box-shadow:0 0 12px -2px var(--primary); transition:.3s; text-transform:uppercase; display:flex; align-items:center; gap:6px; justify-content:center; }
.neon-btn.alt { background: linear-gradient(135deg,#222a55,#1a203f); box-shadow:0 0 0 1px var(--panel-border); }
.neon-btn:hover { filter:brightness(1.12); box-shadow:0 0 16px -2px var(--secondary); }

.config-table { width:100%; border-collapse: collapse; font-size:.9rem; }
.config-table th, .config-table td { padding:10px 12px; border-bottom:1px solid rgba(255,255,255,.07); vertical-align:middle; }
.config-table th { font-weight:600; font-size:.72rem; letter-spacing:1px; text-transform:uppercase; color:var(--primary); }
.config-table tbody tr { transition:.25s; }
.config-table tbody tr:hover { background:rgba(0,242,255,.05); }
.config-table tbody tr.late-align td:nth-child(2){ text-align:right; }
.config-table tbody tr.late-align td:nth-child(3){ text-align:right; }
.config-table tbody tr.late-align .selected-part{ align-items:flex-end; }

.part-select-btn { background:rgba(0,242,255,.08); border:1px solid var(--panel-border); color:var(--primary); font-weight:600; padding:6px 10px; border-radius:6px; cursor:pointer; font-size:.75rem; letter-spacing:.5px; display:inline-flex; align-items:center; gap:6px; transition:.25s; }
.part-select-btn:hover { background:var(--primary); color:#04111d; box-shadow:0 0 14px -2px var(--primary); }
.remove-part-btn { background:transparent; color:#ff5d5d; border:none; cursor:pointer; font-size:1rem; display:inline-flex; align-items:center; }
.remove-part-btn:hover { color:#ff8282; }

.selected-part { display:flex; flex-direction:column; gap:4px; }
.selected-part .name { font-weight:600; font-size:.82rem; }
.selected-part .meta { font-size:.65rem; opacity:.7; }

.total-row td, .power-row td { font-weight:700; font-size:.85rem; }
.total-row { background:rgba(0,242,255,.07); }
.power-row { background:rgba(255,0,230,.07); }

.export-actions { margin-top:16px; display:flex; gap:12px; flex-wrap:wrap; }
.compatibility-status { margin-bottom:10px; font-size:.75rem; letter-spacing:.5px; font-weight:600; text-transform:uppercase; }
.compatibility-status.ok { color:var(--ok); }
.compatibility-status.warn { color:var(--warn); }
.compatibility-status.error { color:var(--danger); }

.summary-list { display:flex; flex-direction:column; gap:10px; font-size:.75rem; }
.summary-item { display:flex; flex-direction:column; gap:2px; padding:8px 10px; background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.08); border-radius:8px; }
.summary-item .label { font-weight:600; font-size:.68rem; letter-spacing:.5px; color:var(--primary); }
.summary-item .value { font-size:.75rem; }

.warning-box { background: linear-gradient(135deg,#371313,#551d1d); border:1px solid #ff4d4d; padding:12px 14px; font-size:.7rem; border-radius:8px; line-height:1.4; }
.recommend-box { margin-top:16px; background: linear-gradient(135deg,#142b3d,#122033); border:1px solid var(--panel-border); border-radius:8px; padding:14px 16px; font-size:.7rem; line-height:1.4; }

/* Modal */
.builder-modal { position:fixed; inset:0; background:rgba(5,8,25,.72); backdrop-filter: blur(6px); display:flex; align-items:flex-start; justify-content:center; padding:60px 20px; z-index:1500; overflow:hidden; }
.builder-modal-content { width: min(1100px,100%); background: var(--panel-bg); border:1px solid var(--panel-border); box-shadow: var(--shadow); border-radius:20px; padding:20px 22px 30px; position:relative; animation:pop .35s ease; display:flex; flex-direction:column; gap:18px; max-height:calc(100vh - 120px); overflow:auto; }
.builder-modal-content .scroll-fade-top{ position:sticky; top:0; left:0; right:0; height:34px; margin:-20px -22px 0; /* extend to modal padding */ background:linear-gradient(180deg,rgba(5,8,25,.92),rgba(5,8,25,0)); pointer-events:none; opacity:0; transition:opacity .25s; z-index:5; }
.builder-modal-content.has-scrolled .scroll-fade-top{ opacity:1; }
@keyframes pop { from { transform:translateY(14px); opacity:0;} to { transform:translateY(0); opacity:1;} }
.modal-header { display:flex; justify-content:space-between; align-items:center; }
.modal-header h3 { margin:0; font-size:1rem; font-family:'Orbitron',sans-serif; letter-spacing:1px; color:var(--primary); }
.modal-close { background:none; border:none; color:#fff; font-size:1.4rem; cursor:pointer; line-height:1; }
.modal-close:hover { color:var(--secondary); }
.modal-body-split { display:grid; grid-template-columns: 240px 1fr; gap:20px; }
@media (max-width: 860px){ .modal-body-split { grid-template-columns: 1fr; } .filter-panel { order:2; } }
.filter-panel { border-right:1px solid rgba(255,255,255,.08); padding-right:12px; }
.filter-scroll { /* dùng scroll của modal-content */ display:flex; flex-direction:column; gap:18px; padding-right:4px; }
.filter-group { background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:12px 14px 14px; display:flex; flex-direction:column; gap:10px; position:relative; }
.filter-group:hover { border-color: var(--primary); }
.fg-title { font-size:.65rem; letter-spacing:.5px; text-transform:uppercase; font-weight:700; opacity:.8; color:var(--primary); }
.filter-group input[type=text], .filter-group select { background:rgba(0,0,0,.35); border:1px solid var(--panel-border); color:#fff; padding:8px 10px; border-radius:8px; outline:none; font-size:.72rem; width:100%; }
.filter-group input[type=text]:focus, .filter-group select:focus { border-color: var(--primary); box-shadow:0 0 0 1px var(--primary); }
.brand-filter label.chk { display:flex; align-items:center; gap:6px; font-size:.7rem; cursor:pointer; }
.brand-filter input[type=checkbox] { accent-color: var(--primary); }
.pf-labels { display:flex; justify-content:space-between; font-size:.65rem; opacity:.8; }
.pf-sliders { display:flex; flex-direction:column; gap:6px; }
.pf-sliders.single input[type=range]{ width:100%; }
.parts-area { min-height:520px; display:flex; flex-direction:column; }

/* CPU full-width mode: filters on top */
.builder-modal-content.cpu-mode .modal-body-split { display:flex; flex-direction:column; }
.builder-modal-content.cpu-mode .filter-panel { border-right:none; padding-right:0; }
.builder-modal-content.cpu-mode .filter-scroll { flex-direction:row; flex-wrap:wrap; max-height:none; gap:14px; }
.builder-modal-content.cpu-mode .filter-group { flex:1 1 160px; min-width:180px; }
.builder-modal-content.cpu-mode .parts-area, .builder-modal-content.cpu-mode #parts-grid { width:100%; }
.builder-modal-content.cpu-mode #parts-grid { display:block; }
.builder-modal-content.cpu-mode .cpu-table { font-size:.75rem; }
.builder-modal-content.cpu-mode .cpu-table th, .builder-modal-content.cpu-mode .cpu-table td { padding:8px 12px; }

.parts-grid { display:grid; gap:14px; grid-template-columns: repeat(auto-fill,minmax(240px,1fr)); padding-right:4px; }
.cpu-table { width:100%; border-collapse:collapse; font-size:.72rem; max-height:520px; }
.cpu-table thead { position:sticky; top:0; background:rgba(10,15,35,.95); backdrop-filter:blur(6px); }
.cpu-table th { text-align:left; font-weight:600; padding:8px 10px; border-bottom:1px solid rgba(255,255,255,.12); letter-spacing:.5px; }
.cpu-table th[data-field] { cursor:pointer; position:relative; user-select:none; }
.cpu-table th[data-field]:hover { color:var(--primary); }
.cpu-table th.sort-asc::after, .cpu-table th.sort-desc::after { content:''; border:5px solid transparent; position:absolute; right:6px; top:50%; transform:translateY(-50%); }
.cpu-table th.sort-asc::after { border-bottom-color: var(--primary); margin-top:-4px; }
.cpu-table th.sort-desc::after { border-top-color: var(--primary); margin-top:4px; }
.cpu-table td { padding:8px 10px; border-bottom:1px solid rgba(255,255,255,.06); }
.cpu-table tbody tr { cursor:pointer; }
.cpu-table tbody tr:hover { background:rgba(0,242,255,.07); }
.cpu-table td.price { font-weight:600; color:var(--accent); }
.cpu-table td .inferred { opacity:.55; font-style:italic; }
.cpu-table td.price.estimated::before { content:'≈ '; opacity:.75; }
.cpu-table td.price.estimated { position:relative; }
.cpu-table td.price.estimated:hover::after { content:'Giá ước tính'; position:absolute; left:0; top:-18px; font-size:.55rem; background:rgba(0,0,0,.7); padding:2px 6px; border-radius:6px; }
.cpu-table button.mini-add { background:var(--primary); border:none; color:#04111d; font-weight:600; font-size:.65rem; padding:6px 10px; border-radius:6px; cursor:pointer; }
.cpu-table button.mini-add:hover { filter:brightness(1.1); }
.cpu-table .more-row { text-align:center; font-size:.7rem; cursor:pointer; padding:12px 10px; color:var(--primary); }
.cpu-table .more-row:hover { background:rgba(0,242,255,.08); }
.part-card { background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.1); border-radius:12px; padding:14px 14px 16px; display:flex; flex-direction:column; gap:8px; position:relative; cursor:pointer; transition:.25s; }
.part-card:hover { border-color: var(--primary); box-shadow:0 0 0 1px var(--primary),0 0 14px -2px var(--primary); }
.part-card h4 { margin:0; font-size:.75rem; line-height:1.3; font-weight:600; }
.part-meta { font-size:.6rem; opacity:.65; display:flex; flex-wrap:wrap; gap:6px; }
.part-price { font-size:.8rem; font-weight:600; color:var(--accent); }
.badge { padding:2px 6px; background:linear-gradient(135deg,var(--primary),var(--secondary)); border-radius:20px; font-size:.55rem; font-weight:700; letter-spacing:.5px; }
.badge.alt { background:linear-gradient(135deg,#223,#345); }
.efficiency { font-size:.55rem; font-weight:600; letter-spacing:.5px; opacity:.75; }
.stock { position:absolute; top:8px; right:8px; font-size:.55rem; font-weight:600; padding:3px 6px; border-radius:6px; background:#1d2a3a; border:1px solid var(--panel-border); }
.stock.low { background:#40222b; border-color:#ff4d6d; }

.hidden { display:none !important; }
.hidden { display:none !important; }

.table-scroll-wrap{ width:100%; overflow:auto; }
.table-scroll-wrap table{ min-width:1100px; }

/* ================= Responsive Enhancements ================= */
/* iPad / Tablet landscape & down */
@media (max-width: 1024px){
    .pc-builder-wrapper{ padding:32px clamp(10px,3vw,28px); }
    .builder-categories, .builder-config, .builder-summary{ padding:16px 16px 20px; }
    .parts-grid{ grid-template-columns: repeat(auto-fill,minmax(210px,1fr)); }
}

/* iPad portrait / small tablet */
@media (max-width: 820px){
    .builder-title{ font-size:1rem; }
    .parts-grid{ grid-template-columns: repeat(auto-fill,minmax(200px,1fr)); }
    .modal-toolbar input, .modal-toolbar select{ min-width:200px; padding:8px 10px; }
    .builder-modal{ padding:50px 14px; }
    .builder-modal-content{ padding:18px 18px 26px; }
}

/* Large phones & phablets */
@media (max-width: 680px){
    :root { --gap:14px; }
    .pc-builder-wrapper{ padding:26px 14px 60px; }
    .pc-builder{ gap: var(--gap); }
    .builder-categories{ position:sticky; top:0; z-index:20; box-shadow:0 4px 14px -6px rgba(0,0,0,.6); }
    .builder-categories ul{ gap:6px; }
    .builder-categories li{ padding:6px 8px; font-size:.75rem; }
    .builder-summary{ order:3; }
    .export-actions{ flex-direction:column; }
    .parts-grid{ grid-template-columns: repeat(auto-fill,minmax(180px,1fr)); gap:10px; }
    .part-card{ padding:12px 12px 14px; }
    .part-card h4{ font-size:.7rem; }
    .part-meta{ font-size:.55rem; }
    .part-price{ font-size:.7rem; }
    .modal-toolbar{ gap:8px; }
    .modal-toolbar input{ width:100%; min-width:0; flex:1; }
    .builder-modal{ padding:40px 10px; }
    .builder-modal-content{ width:100%; border-radius:16px; }
}

/* Phones <=600px: stack config table for readability */
@media (max-width:600px){
    .config-table{ font-size:.78rem; }
    .config-table thead{ display:none; }
    .config-table tbody tr{ display:flex; flex-direction:column; align-items:stretch; background:rgba(255,255,255,.03); margin-bottom:10px; border:1px solid rgba(255,255,255,.08); border-radius:10px; padding:6px 10px; position:relative; }
    .config-table tbody tr:hover{ background:rgba(255,255,255,.05); }
    .config-table td, .config-table th{ border:none; padding:4px 0 !important; }
    .config-table td:first-child{ font-size:.65rem; letter-spacing:.5px; text-transform:uppercase; opacity:.7; }
    .config-table td:nth-child(3){ font-weight:600; }
    .config-table td:last-child{ margin-top:4px; }
    .selected-part .name{ font-size:.78rem; }
    .selected-part .meta{ font-size:.58rem; }
    .total-row, .power-row{ background:rgba(0,242,255,.07); }
    .power-row{ margin-top:-6px; }
}

/* Extra small phones */
@media (max-width:480px){
    .parts-grid{ grid-template-columns: repeat(auto-fill,minmax(160px,1fr)); }
    .builder-modal{ padding:30px 8px; }
    .part-card{ padding:10px 10px 12px; }
    .modal-header h3{ font-size:.85rem; }
    .part-price{ font-size:.68rem; }
}

/* Height-constrained (landscape phones) */
@media (max-height:600px){
    .builder-modal{ align-items:stretch; padding:20px 8px; }
    .builder-modal-content{ max-height:100%; }
    .parts-grid{ max-height:360px; }
}