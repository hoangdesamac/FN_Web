<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trang S·∫£n Ph·∫©m</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/css/lightgallery-bundle.min.css">
    <link rel="stylesheet" href="HTML/Style/style.css">
    <link rel="stylesheet" href="HTML/Style/styleproduct.css">
</head>
<body>
<!-- Header container -->
<div id="header-container"></div>

<!-- Breadcrumb -->
<div class="breadcrumb">
    <a href="index.html"><i class='bx bx-home-alt'></i> Trang ch·ªß</a> ‚Ä∫
    <span id="productCategory"></span> ‚Ä∫
    <span id="productName"></span>
</div>

<div class="container">
    <div class="product-section">
        <div class="product-images">
            <div id="lightgallery" class="slideshow-wrapper">
                <a href="" data-lg-size="1406-1390">
                    <div class="image-container">
                        <img id="mainImage" class="main-image zoom-hover" src="" alt="Product Image" />
                    </div>
                </a>
            </div>
            <div class="thumbnails-wrapper">
                <button class="nav-btn nav-prev" onclick="scrollThumbnails(-1)">‚Üê</button>
                <div class="thumbnails" id="thumbnailsList">
                    <!-- Thumbnails s·∫Ω ƒë∆∞·ª£c th√™m ƒë·ªông b·∫±ng JS -->
                </div>
                <button class="nav-btn nav-next" onclick="scrollThumbnails(1)">‚Üí</button>
            </div>
            <div class="bundle-products">
                <h3>Mua k√®m combo</h3>
                <div class="product-list-wrapper">
                    <button class="nav-btn bundle-prev" onclick="scrollBundleProducts(-1)">‚Üê</button>
                    <div class="product-list" id="bundleProductList">
                        <!-- Bundle products s·∫Ω ƒë∆∞·ª£c th√™m ƒë·ªông b·∫±ng JS -->
                    </div>
                    <button class="nav-btn bundle-next" onclick="scrollBundleProducts(1)">‚Üí</button>
                </div>
                <div class="subtotal-row">
                    <div class="subtotal">
                        <span>T·∫°m t√≠nh:</span>
                        <span id="bundleSubtotal">0‚Ç´</span>
                    </div>
                    <button class="add-to-cart-bundle"><i class='bx bx-cart-add'></i> Th√™m v√†o gi·ªè</button>
                </div>
            </div>
        </div>
        <div class="product-info">
            <div class="sticky-box">
                <h1 id="productTitle" class="product-name"></h1>
                <div class="price-box">
                    <span class="price product-price"><strong id="productPrice"></strong></span>
                </div>
                <button class="buy-now add-to-cart-btn" data-id="">
                    <span class="main-text">MUA NGAY</span>
                    <span class="sub-text">ho·∫∑c mua combo ƒë·ªÉ nh·∫≠n ∆∞u ƒë√£i</span>
                </button>
                <div class="promotion-box">
                    <h4>∆Øu ƒë√£i ƒë·∫∑c bi·ªát:</h4>
                    <ul class="benefits">
                        <li>üîñ Gi·∫£m ƒë·∫øn 34% cho combo mua k√®m</li>
                        <li>üöö Mi·ªÖn ph√≠ giao h√†ng to√†n qu·ªëc</li>
                        <li>üí≥ Tr·∫£ g√≥p 0% qua th·∫ª Visa/Master/JCB</li>
                    </ul>
                </div>
                <ul class="benefits">
                    <li>‚úÖ B·∫£o h√†nh 36 th√°ng ch√≠nh h√£ng</li>
                    <li>üöö Giao h√†ng t·∫≠n n∆°i to√†n qu·ªëc</li>
                    <li>üí≥ H·ªó tr·ª£ tr·∫£ g√≥p qua th·∫ª</li>
                    <li>üîÑ ƒê·ªïi tr·∫£ trong 7 ng√†y</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="product-tabs">
        <div class="tab-buttons">
            <button class="tab-btn active" onclick="showTab('tab1', event)">M√¥ t·∫£</button>
            <button class="tab-btn" onclick="showTab('tab2', event)">Th√¥ng s·ªë k·ªπ thu·∫≠t</button>
            <button class="tab-btn" onclick="showTab('tab3', event)">ƒê√°nh gi√°</button>
            <button class="tab-btn" onclick="showTab('tab4', event)">S·∫£n ph·∫©m li√™n quan</button>
        </div>
        <div id="tab1" class="tab-content active">
            <div id="productDescription"></div>
        </div>
        <div id="tab2" class="tab-content">
            <table class="spec-table">
                <tbody id="productSpecs"></tbody>
            </table>
        </div>
        <div id="tab3" class="tab-content">
            <div class="rating-summary">
                <h4>‚≠ê T·ªïng quan ƒë√°nh gi√°</h4>
                <ul id="ratingSummary"></ul>
            </div>
            <div id="reviewList"></div>
            <div class="review-form">
                <h4>G·ª≠i ƒë√°nh gi√° c·ªßa b·∫°n:</h4>
                <textarea placeholder="Vi·∫øt ƒë√°nh gi√° t·∫°i ƒë√¢y..."></textarea>
                <button>G·ª≠i ƒë√°nh gi√°</button>
            </div>
        </div>
        <div id="tab4" class="tab-content">
            <div id="relatedProducts"></div>
        </div>
    </div>

    <div class="recently-viewed">
        <h3>üëÄ ƒê√£ xem g·∫ßn ƒë√¢y:</h3>
        <button class="nav-btn nav-prev" onclick="scrollRecent(-1)">‚Üê</button>
        <button class="nav-btn nav-next" onclick="scrollRecent(1)">‚Üí</button>
        <div class="product-list" id="recentlyViewedList"></div>
    </div>
</div>

<!-- Footer container -->
<div id="footer-container"></div>

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/lightgallery.min.js"></script>
<script src="Script/js_MenuClick.js"></script>
<script src="Script/js_ShowPopupAuth.js"></script>
<script src="Script/js_Checkout.js" defer></script>
<script src="Script/js_product.js"></script>
<script>
    async function loadPagePart(url, containerId, callback = null) {
        try {
            const response = await fetch(url);
            const html = await response.text();
            const container = document.getElementById(containerId);
            container.innerHTML = html;

            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = html;
            const scripts = tempDiv.querySelectorAll('script');
            scripts.forEach(oldScript => {
                const src = oldScript.src;
                if (src && document.querySelector(`script[src="${src}"]`)) return;
                const newScript = document.createElement('script');
                if (src) {
                    newScript.src = src;
                    newScript.defer = true;
                } else {
                    newScript.textContent = oldScript.textContent;
                }
                document.body.appendChild(newScript);
            });

            if (typeof callback === 'function') callback();
        } catch (error) {
            console.error(`L·ªói khi t·∫£i ${url}:`, error);
        }
    }

    loadPagePart("HTML/Layout/header.html", "header-container", () => {
        const checkDomReady = () => {
            const menuToggle = document.getElementById('menuToggle');
            const menuList = document.getElementById('menuList');
            const submenuItems = document.querySelectorAll('.submenu li');
            if (!menuToggle || !menuList || submenuItems.length < 3) {
                setTimeout(checkDomReady, 100);
                return;
            }
            if (typeof initializeMenuSystem === 'function') {
                initializeMenuSystem();
            }
            updateCartCount();
        };
        checkDomReady();
    });

    loadPagePart("HTML/Layout/footer.html", "footer-container");
</script>
</body>
</html>